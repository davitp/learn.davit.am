(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7545],{5128:function(i,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/linux-programming/samples/makefile",function(){return n(1956)}])},1956:function(i,s,n){"use strict";n.r(s),n.d(s,{useTOC:function(){return d}});var e=n(2676),h=n(9293),l=n(1570),a=n(5286),r=n(9109);function d(i){return[]}s.default=(0,h.c)(function(i){let s={code:"code",h1:"h1",li:"li",p:"p",pre:"pre",span:"span",strong:"strong",ul:"ul",...(0,a.a)(),...i.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(s.h1,{children:"Compiling multiple files using Makefile"}),"\n",(0,e.jsx)(s.p,{children:"In this sample, we will compile a program having two modules with Makefile."}),"\n",(0,e.jsx)(s.p,{children:"The program will contain two modules:"}),"\n",(0,e.jsxs)(s.ul,{children:["\n",(0,e.jsx)(s.li,{children:"main.cpp - the main logic of the application"}),"\n",(0,e.jsx)(s.li,{children:"message.cpp - a module that can simply print messages"}),"\n"]}),"\n",(0,e.jsx)(s.p,{children:"Letâ€™s assume the main.cpp contains the following logic:"}),"\n",(0,e.jsx)(s.pre,{tabIndex:"0","data-language":"c","data-word-wrap":"",children:(0,e.jsxs)(s.code,{children:[(0,e.jsxs)(s.span,{children:[(0,e.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"#include"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:' "message.h"'})]}),"\n",(0,e.jsx)(s.span,{children:" "}),"\n",(0,e.jsxs)(s.span,{children:[(0,e.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"int"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" main"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(){"})]}),"\n",(0,e.jsx)(s.span,{children:" "}),"\n",(0,e.jsx)(s.span,{children:(0,e.jsx)(s.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"    // the function printMyMessage is declared in the message.h header file"})}),"\n",(0,e.jsx)(s.span,{children:(0,e.jsx)(s.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"    // but the implementation is in the other module (message.cpp)"})}),"\n",(0,e.jsxs)(s.span,{children:[(0,e.jsx)(s.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"    printMyMessage"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"Hello"'}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:");"})]}),"\n",(0,e.jsx)(s.span,{children:" "}),"\n",(0,e.jsxs)(s.span,{children:[(0,e.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"    return"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" 0"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:";"})]}),"\n",(0,e.jsx)(s.span,{children:(0,e.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"}"})})]})}),"\n",(0,e.jsx)(s.p,{children:"The file message.h contains only a declaration of the used function:"}),"\n",(0,e.jsx)(s.pre,{tabIndex:"0","data-language":"c","data-word-wrap":"",children:(0,e.jsxs)(s.code,{children:[(0,e.jsxs)(s.span,{children:[(0,e.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"#ifndef"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" MESSAGE_H"})]}),"\n",(0,e.jsxs)(s.span,{children:[(0,e.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"#define"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" MESSAGE_H"})]}),"\n",(0,e.jsx)(s.span,{children:" "}),"\n",(0,e.jsx)(s.span,{children:(0,e.jsx)(s.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"// the declaration of the printing function"})}),"\n",(0,e.jsx)(s.span,{children:(0,e.jsx)(s.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"// no implementation in the header file"})}),"\n",(0,e.jsxs)(s.span,{children:[(0,e.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"void"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" printMyMessage"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"const"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:" char*"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:" message"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:");"})]}),"\n",(0,e.jsx)(s.span,{children:" "}),"\n",(0,e.jsx)(s.span,{children:(0,e.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"#endif"})})]})}),"\n",(0,e.jsx)(s.p,{children:"Then the module message.cpp should implement the mentioned function as follows:"}),"\n",(0,e.jsx)(s.pre,{tabIndex:"0","data-language":"c","data-word-wrap":"",children:(0,e.jsxs)(s.code,{children:[(0,e.jsxs)(s.span,{children:[(0,e.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"#include"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:" <cstdio>"})]}),"\n",(0,e.jsx)(s.span,{children:" "}),"\n",(0,e.jsx)(s.span,{children:(0,e.jsx)(s.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"// the implementation of the printMyMessage function "})}),"\n",(0,e.jsxs)(s.span,{children:[(0,e.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"void"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" printMyMessage"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"const"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:" char*"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:" message"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"){"})]}),"\n",(0,e.jsxs)(s.span,{children:[(0,e.jsx)(s.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"	printf"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"New Message: '}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"%s"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" \\n"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"'}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", message);"})]}),"\n",(0,e.jsx)(s.span,{children:(0,e.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"}"})})]})}),"\n",(0,e.jsx)(s.p,{children:"We can manually compile the modules one by one as follows:"}),"\n",(0,e.jsx)(s.pre,{icon:r.Fx,tabIndex:"0","data-language":"sh","data-word-wrap":"",children:(0,e.jsxs)(s.code,{children:[(0,e.jsx)(s.span,{children:(0,e.jsx)(s.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"# compile main.cpp module to the object file main.o"})}),"\n",(0,e.jsxs)(s.span,{children:[(0,e.jsx)(s.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"g++"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" -c"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:" main.cpp"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" -o"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:" main.o"})]}),"\n",(0,e.jsx)(s.span,{children:" "}),"\n",(0,e.jsx)(s.span,{children:(0,e.jsx)(s.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"# compile message.cpp module to the object file message.o"})}),"\n",(0,e.jsxs)(s.span,{children:[(0,e.jsx)(s.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"g++"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" -c"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:" message.cpp"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" -o"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:" message.o"})]})]})}),"\n",(0,e.jsx)(s.p,{children:"Then, having two modules main.o and message.o we can build the final executable by linking those together:"}),"\n",(0,e.jsx)(s.pre,{icon:r.Fx,tabIndex:"0","data-language":"sh","data-word-wrap":"",children:(0,e.jsx)(s.code,{children:(0,e.jsxs)(s.span,{children:[(0,e.jsx)(s.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"g++"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:" main.o"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:" message.o"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" -o"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:" program"})]})})}),"\n",(0,e.jsx)(s.p,{children:"To automate the process we could also write a Makefile as follows:"}),"\n",(0,e.jsx)(s.pre,{icon:r.Fx,tabIndex:"0","data-language":"sh","data-word-wrap":"",children:(0,e.jsxs)(s.code,{children:[(0,e.jsxs)(s.span,{children:[(0,e.jsx)(s.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"all:"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:" program"})]}),"\n",(0,e.jsx)(s.span,{children:" "}),"\n",(0,e.jsxs)(s.span,{children:[(0,e.jsx)(s.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"program:"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:" main.o"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:" message.o"})]}),"\n",(0,e.jsxs)(s.span,{children:[(0,e.jsx)(s.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"	g++"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:" main.o"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:" message.o"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" -o"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:" program"})]}),"\n",(0,e.jsx)(s.span,{children:" "}),"\n",(0,e.jsxs)(s.span,{children:[(0,e.jsx)(s.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"main.o:"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:" main.cpp"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:" message.h"})]}),"\n",(0,e.jsxs)(s.span,{children:[(0,e.jsx)(s.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"	g++"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" -c"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:" main.cpp"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" -o"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:" main.o"})]}),"\n",(0,e.jsx)(s.span,{children:" "}),"\n",(0,e.jsxs)(s.span,{children:[(0,e.jsx)(s.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"message.o:"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:" message.cpp"})]}),"\n",(0,e.jsxs)(s.span,{children:[(0,e.jsx)(s.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"	g++"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" -c"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:" message.cpp"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" -o"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:" message.o"})]}),"\n",(0,e.jsx)(s.span,{children:" "}),"\n",(0,e.jsx)(s.span,{children:(0,e.jsx)(s.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"clean:"})}),"\n",(0,e.jsxs)(s.span,{children:[(0,e.jsx)(s.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"	rm"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" *"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:".o"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:" program"})]})]})}),"\n",(0,e.jsxs)(s.p,{children:["Now, invoking ",(0,e.jsx)(s.strong,{children:"make"})," command will create all the necessary files for the program."]}),"\n",(0,e.jsxs)(s.p,{children:["You may also want to clean the build output with a special ",(0,e.jsx)(s.strong,{children:"clean"})," target as follows:"]}),"\n",(0,e.jsx)(s.pre,{icon:r.Fx,tabIndex:"0","data-language":"sh","data-word-wrap":"",children:(0,e.jsx)(s.code,{children:(0,e.jsxs)(s.span,{children:[(0,e.jsx)(s.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"make"}),(0,e.jsx)(s.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:" clean"})]})})})]})},"/linux-programming/samples/makefile",{filePath:"pages/linux-programming/samples/makefile.mdx",timestamp:1712608548e3,pageMap:l.v,frontMatter:{description:"In this sample, we will compile a program having two modules with Makefile."},title:"Compiling multiple files using Makefile"},"undefined"==typeof RemoteContent?d:RemoteContent.useTOC)}},function(i){i.O(0,[4661,2888,9774,179],function(){return i(i.s=5128)}),_N_E=i.O()}]);