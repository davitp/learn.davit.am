(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[674],{7397:function(i,s,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/system-programming/topics/io-multiplexing",function(){return e(18)}])},18:function(i,s,e){"use strict";e.r(s),e.d(s,{useTOC:function(){return d}});var n=e(2676),l=e(3147),h=e(7983),r=e(6438);function d(i){let s={code:"code",...(0,r.a)()};return[{value:"Overview",id:"overview",depth:2},{value:"Key Concepts",id:"key-concepts",depth:2},{value:"Blocking vs. Non-Blocking I/O",id:"blocking-vs-non-blocking-io",depth:3},{value:"The Problem: Multiple File Descriptors",id:"the-problem-multiple-file-descriptors",depth:3},{value:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.code,{children:"select()"})," — The Classic Interface (Avoid in New Code)"]}),id:"select--the-classic-interface-avoid-in-new-code",depth:3},{value:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.code,{children:"poll()"})," — A Better ",(0,n.jsx)(s.code,{children:"select()"})," (Portable Fallback)"]}),id:"poll--a-better-select-portable-fallback",depth:3},{value:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.code,{children:"epoll"})," — The Linux High-Performance Solution (Use This)"]}),id:"epoll--the-linux-high-performance-solution-use-this",depth:3},{value:"Creating an epoll instance",id:"creating-an-epoll-instance",depth:4},{value:"Adding, modifying, or removing descriptors",id:"adding-modifying-or-removing-descriptors",depth:4},{value:"Waiting for events",id:"waiting-for-events",depth:4},{value:"Typical epoll server loop",id:"typical-epoll-server-loop",depth:4},{value:"Level-triggered vs. Edge-triggered",id:"level-triggered-vs-edge-triggered",depth:4},{value:"Why epoll is the right choice for Linux",id:"why-epoll-is-the-right-choice-for-linux",depth:4},{value:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.code,{children:"io_uring"})," — The Modern Async Interface (Brief Introduction)"]}),id:"io_uring--the-modern-async-interface-brief-introduction",depth:3},{value:"Interface Comparison",id:"interface-comparison",depth:3},{value:"The Event-Driven Server Pattern (Reactor)",id:"the-event-driven-server-pattern-reactor",depth:3},{value:"Common Pitfalls",id:"common-pitfalls",depth:3},{value:"Practice / Lab",id:"practice--lab",depth:2},{value:"Non-Blocking Read",id:"non-blocking-read",depth:3},{value:(0,n.jsxs)(n.Fragment,{children:["Echo Server with ",(0,n.jsx)(s.code,{children:"poll()"})]}),id:"echo-server-with-poll",depth:3},{value:(0,n.jsxs)(n.Fragment,{children:["Echo Server with ",(0,n.jsx)(s.code,{children:"epoll()"})]}),id:"echo-server-with-epoll",depth:3},{value:"Edge-Triggered epoll",id:"edge-triggered-epoll",depth:3},{value:"Timeout Handling",id:"timeout-handling",depth:3},{value:"Homework",id:"homework",depth:2},{value:"Samples",id:"samples",depth:3},{value:"References & Resources",id:"references--resources",depth:2},{value:"Quiz (Self-check)",id:"quiz-self-check",depth:2},{value:"Suggested Tools",id:"suggested-tools",depth:2}]}s.default=(0,l.c)(function(i){let{toc:s=d(i)}=i,e={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.a)(),...i.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.h1,{children:"I/O Multiplexing"}),"\n",(0,n.jsx)(e.h2,{id:s[0].id,children:s[0].value}),"\n",(0,n.jsxs)(e.p,{children:["This week introduces ",(0,n.jsx)(e.strong,{children:"I/O multiplexing"})," — the technique of monitoring multiple file descriptors simultaneously to determine which ones are ready for I/O, without blocking on any individual one.\nWhen building servers that handle many simultaneous connections, blocking on a single ",(0,n.jsx)(e.code,{children:"read()"})," or ",(0,n.jsx)(e.code,{children:"accept()"})," is not acceptable. I/O multiplexing solves this by letting the kernel notify your program when descriptors become ready."]}),"\n",(0,n.jsxs)(e.p,{children:["By the end of this week, students will understand the difference between blocking and non-blocking I/O, how each multiplexing interface works (",(0,n.jsx)(e.code,{children:"select"}),", ",(0,n.jsx)(e.code,{children:"poll"}),", ",(0,n.jsx)(e.code,{children:"epoll"}),"), when to use each, and how to implement an event-driven server loop."]}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsx)("iframe",{width:"768",height:"496",src:"https://miro.com/app/live-embed/uXjVJKv1fww=/?focusWidget=3458764660621084159&embedMode=view_only_without_ui&embedId=641768031297",frameBorder:"0",scrolling:"no",allow:"fullscreen; clipboard-read; clipboard-write",allowfullscreen:!0}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsx)(e.h2,{id:s[1].id,children:s[1].value}),"\n",(0,n.jsx)(e.h3,{id:s[2].id,children:s[2].value}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:["By default, I/O system calls ",(0,n.jsx)(e.strong,{children:"block"})," until data is available or the operation completes"]}),"\n",(0,n.jsxs)(e.li,{children:["A process blocked on ",(0,n.jsx)(e.code,{children:"accept()"})," or ",(0,n.jsx)(e.code,{children:"recv()"})," cannot handle any other descriptor"]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:"Non-blocking mode"})," makes calls return immediately with ",(0,n.jsx)(e.code,{children:"EAGAIN"})," / ",(0,n.jsx)(e.code,{children:"EWOULDBLOCK"})," when they would block"]}),"\n",(0,n.jsxs)(e.li,{children:["Set non-blocking mode with ",(0,n.jsx)(e.code,{children:"fcntl()"}),":","\n",(0,n.jsx)(e.pre,{tabIndex:"0","data-language":"c","data-word-wrap":"",children:(0,n.jsxs)(e.code,{children:[(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"int"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" flags "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" fcntl"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(fd, F_GETFL, "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"0"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:");"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"fcntl"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(fd, F_SETFL, flags "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"|"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" O_NONBLOCK);"})]})]})}),"\n"]}),"\n",(0,n.jsxs)(e.li,{children:["Or pass ",(0,n.jsx)(e.code,{children:"SOCK_NONBLOCK"})," directly to ",(0,n.jsx)(e.code,{children:"socket()"}),":","\n",(0,n.jsx)(e.pre,{tabIndex:"0","data-language":"c","data-word-wrap":"",children:(0,n.jsx)(e.code,{children:(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"int"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" fd "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" socket"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(AF_INET, SOCK_STREAM "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"|"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" SOCK_NONBLOCK, "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"0"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:");"})]})})}),"\n"]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:"Busy-polling non-blocking FDs in a loop wastes CPU"})," — multiplexing is the right solution"]}),"\n"]}),"\n",(0,n.jsx)(e.h3,{id:s[3].id,children:s[3].value}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsx)(e.li,{children:"A server may handle hundreds or thousands of simultaneous client connections"}),"\n",(0,n.jsx)(e.li,{children:"Neither blocking (misses other clients) nor busy-polling (wastes CPU) is acceptable"}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:"I/O multiplexing"}),": register interest in a set of descriptors with the kernel; the kernel tells you which ones are ready"]}),"\n",(0,n.jsxs)(e.li,{children:["Your program then only calls ",(0,n.jsx)(e.code,{children:"read()"})," / ",(0,n.jsx)(e.code,{children:"write()"})," on descriptors that are confirmed ready — the calls will not block"]}),"\n",(0,n.jsxs)(e.li,{children:["This is the foundation of ",(0,n.jsx)(e.strong,{children:"event-driven"})," / ",(0,n.jsx)(e.strong,{children:"reactor-pattern"})," servers"]}),"\n"]}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsx)(e.h3,{id:s[4].id,children:s[4].value}),"\n",(0,n.jsx)(e.pre,{tabIndex:"0","data-language":"c","data-word-wrap":"",children:(0,n.jsxs)(e.code,{children:[(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"int"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" select"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"int"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:" nfds"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", fd_set "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"*"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"readfds"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", fd_set "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"*"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"writefds"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"           fd_set "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"*"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"exceptfds"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"struct"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" timeval "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"*"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"timeout"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:");"})]})]})}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:["\n",(0,n.jsxs)(e.p,{children:["Monitors up to ",(0,n.jsx)(e.code,{children:"nfds"})," file descriptors across three sets: readable, writable, exceptional conditions"]}),"\n"]}),"\n",(0,n.jsxs)(e.li,{children:["\n",(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:"nfds"})," must be the highest file descriptor number + 1"]}),"\n"]}),"\n",(0,n.jsxs)(e.li,{children:["\n",(0,n.jsxs)(e.p,{children:["Returns the total number of ready descriptors, ",(0,n.jsx)(e.code,{children:"0"})," on timeout, ",(0,n.jsx)(e.code,{children:"-1"})," on error"]}),"\n"]}),"\n",(0,n.jsxs)(e.li,{children:["\n",(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:"fd_set"})," manipulation macros:"]}),"\n",(0,n.jsx)(e.pre,{tabIndex:"0","data-language":"c","data-word-wrap":"",children:(0,n.jsxs)(e.code,{children:[(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"fd_set readfds;"})}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"FD_ZERO"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"&"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"readfds"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:");"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"         // Clear the set"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"FD_SET"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(sockfd, "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"&"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"readfds"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:");"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"  // Add a descriptor"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"FD_CLR"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(sockfd, "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"&"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"readfds"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:");"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"  // Remove a descriptor"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"FD_ISSET"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(sockfd, "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"&"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"readfds"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:");"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:" // Test if ready after select() returns"})]})]})}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:"Minimal example:"})}),"\n",(0,n.jsx)(e.pre,{tabIndex:"0","data-language":"c","data-word-wrap":"",children:(0,n.jsxs)(e.code,{children:[(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"fd_set readfds;"})}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"FD_ZERO"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"&"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"readfds"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:");"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"FD_SET"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(listen_fd, "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"&"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"readfds"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:");"})]}),"\n",(0,n.jsx)(e.span,{children:" "}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"struct"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" timeval tv "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" { .tv_sec "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" 5"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", .tv_usec "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" 0"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" };"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"int"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" ready "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" select"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(listen_fd "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"+"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" 1"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"&"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"readfds"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"NULL"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"NULL"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"&"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"tv"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:");"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"if"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" (ready "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:">"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" 0"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:" &&"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" FD_ISSET"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(listen_fd, "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"&"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"readfds"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:")) {"})]}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"    // listen_fd is ready — accept() will not block"})}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"}"})})]})}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsxs)(e.strong,{children:["Why ",(0,n.jsx)(e.code,{children:"select()"})," is not recommended:"]})}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:["Hard limit of ",(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:"FD_SETSIZE"})})," descriptors (typically ",(0,n.jsx)(e.strong,{children:"1024"}),") — cannot be changed without recompiling"]}),"\n",(0,n.jsxs)(e.li,{children:["The fd_set must be ",(0,n.jsx)(e.strong,{children:"rebuilt before every call"})," (it is modified in place)"]}),"\n",(0,n.jsxs)(e.li,{children:["Requires an ",(0,n.jsx)(e.strong,{children:"O(n) scan"})," over all descriptor positions on return to find which ones fired"]}),"\n",(0,n.jsx)(e.li,{children:"Poor scalability — performance degrades as descriptor count grows"}),"\n",(0,n.jsx)(e.li,{children:(0,n.jsxs)(e.strong,{children:["Only use ",(0,n.jsx)(e.code,{children:"select()"})," when portability to very old or non-Linux systems is required"]})}),"\n"]}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsx)(e.h3,{id:s[5].id,children:s[5].value}),"\n",(0,n.jsx)(e.pre,{tabIndex:"0","data-language":"c","data-word-wrap":"",children:(0,n.jsx)(e.code,{children:(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"int"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" poll"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"struct"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" pollfd "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"*"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"fds"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"nfds_t"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:" nfds"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"int"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:" timeout"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:");"})]})})}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:["Accepts an array of ",(0,n.jsx)(e.code,{children:"pollfd"})," structures instead of bit sets:","\n",(0,n.jsx)(e.pre,{tabIndex:"0","data-language":"c","data-word-wrap":"",children:(0,n.jsxs)(e.code,{children:[(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"struct"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" pollfd {"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"    int"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"   fd;"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"       // File descriptor to monitor"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"    short"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" events;"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"   // Events to watch for (input)"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"    short"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" revents;"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"  // Events that occurred (output, filled by kernel)"})]}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"};"})})]})}),"\n"]}),"\n",(0,n.jsxs)(e.li,{children:["Common event flags:","\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:"POLLIN"})," — data available to read"]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:"POLLOUT"})," — space available to write"]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:"POLLERR"})," — error condition"]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:"POLLHUP"})," — hangup (peer closed connection)"]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:"POLLRDHUP"})," — peer shut down writing half (Linux extension)"]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:"timeout"}),": milliseconds to wait (",(0,n.jsx)(e.code,{children:"-1"})," = block forever, ",(0,n.jsx)(e.code,{children:"0"})," = return immediately)"]}),"\n",(0,n.jsxs)(e.li,{children:["Returns number of ",(0,n.jsx)(e.code,{children:"pollfd"})," entries with non-zero ",(0,n.jsx)(e.code,{children:"revents"}),", ",(0,n.jsx)(e.code,{children:"0"})," on timeout"]}),"\n"]}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:"Minimal example:"})}),"\n",(0,n.jsx)(e.pre,{tabIndex:"0","data-language":"c","data-word-wrap":"",children:(0,n.jsxs)(e.code,{children:[(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"struct"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" pollfd "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"fds"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"["}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"2"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"];"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"fds"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"["}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"0"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"].fd "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" listen_fd;"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"fds"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"["}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"0"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"].events "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" POLLIN;"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"fds"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"["}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"1"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"].fd "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" client_fd;"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"fds"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"["}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"1"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"].events "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" POLLIN;"})]}),"\n",(0,n.jsx)(e.span,{children:" "}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"int"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" ready "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" poll"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(fds, "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"2"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"5000"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:");"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"  // 5 second timeout"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"for"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" ("}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"int"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" i "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" 0"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"; i "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"<"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" 2"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"; i"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"++"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:") {"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"    if"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" ("}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"fds"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"[i].revents "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"&"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" POLLIN) {"})]}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"        // fds[i].fd is ready to read"})}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"    }"})}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"}"})})]})}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsxs)(e.strong,{children:[(0,n.jsx)(e.code,{children:"poll()"})," vs ",(0,n.jsx)(e.code,{children:"select()"}),":"]})}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsx)(e.li,{children:"No hard FD limit (just allocate a larger array)"}),"\n",(0,n.jsxs)(e.li,{children:["No need to rebuild sets — only ",(0,n.jsx)(e.code,{children:"revents"})," is overwritten, ",(0,n.jsx)(e.code,{children:"events"})," is preserved"]}),"\n",(0,n.jsxs)(e.li,{children:["Still ",(0,n.jsx)(e.strong,{children:"O(n)"})," — kernel and user both scan the entire array"]}),"\n",(0,n.jsx)(e.li,{children:"POSIX standard, portable across Linux, macOS, BSDs"}),"\n",(0,n.jsx)(e.li,{children:(0,n.jsxs)(e.strong,{children:["Use ",(0,n.jsx)(e.code,{children:"poll()"})," when you need portability across Unix-like systems; prefer ",(0,n.jsx)(e.code,{children:"epoll()"})," on Linux"]})}),"\n"]}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsx)(e.h3,{id:s[6].id,children:s[6].value}),"\n",(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:"epoll"})," is a Linux-specific interface designed for high-concurrency servers. Unlike ",(0,n.jsx)(e.code,{children:"select"})," and ",(0,n.jsx)(e.code,{children:"poll"}),", it ",(0,n.jsx)(e.strong,{children:"does not require passing the entire monitored set on each call"})," — the kernel maintains the set internally. Event notification is ",(0,n.jsx)(e.strong,{children:"O(1)"})," regardless of how many descriptors are registered."]}),"\n",(0,n.jsx)(e.h4,{id:s[7].id,children:s[7].value}),"\n",(0,n.jsx)(e.pre,{tabIndex:"0","data-language":"c","data-word-wrap":"",children:(0,n.jsxs)(e.code,{children:[(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"int"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" epoll_create1"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"int"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:" flags"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:");"})]}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"// flags: 0 or EPOLL_CLOEXEC (set close-on-exec)"})}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"// Returns an epoll file descriptor (must be closed with close())"})})]})}),"\n",(0,n.jsx)(e.h4,{id:s[8].id,children:s[8].value}),"\n",(0,n.jsx)(e.pre,{tabIndex:"0","data-language":"c","data-word-wrap":"",children:(0,n.jsx)(e.code,{children:(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"int"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" epoll_ctl"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"int"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:" epfd"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"int"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:" op"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"int"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:" fd"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"struct"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" epoll_event "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"*"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"event"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:");"})]})})}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:"op"}),":","\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:"EPOLL_CTL_ADD"})," — start monitoring ",(0,n.jsx)(e.code,{children:"fd"})]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:"EPOLL_CTL_MOD"})," — change events for ",(0,n.jsx)(e.code,{children:"fd"})]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:"EPOLL_CTL_DEL"})," — stop monitoring ",(0,n.jsx)(e.code,{children:"fd"})]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:"epoll_event"})," structure:","\n",(0,n.jsx)(e.pre,{tabIndex:"0","data-language":"c","data-word-wrap":"",children:(0,n.jsxs)(e.code,{children:[(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"struct"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" epoll_event {"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"    uint32_t"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" events;"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"   // Event mask (EPOLLIN, EPOLLOUT, ...)"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"    epoll_data_t"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" data;"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:" // User data (e.g., fd, pointer to context)"})]}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"};"})})]})}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(e.h4,{id:s[9].id,children:s[9].value}),"\n",(0,n.jsx)(e.pre,{tabIndex:"0","data-language":"c","data-word-wrap":"",children:(0,n.jsxs)(e.code,{children:[(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"int"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" epoll_wait"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"int"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:" epfd"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"struct"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" epoll_event "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"*"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"events"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"               int"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:" maxevents"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"int"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:" timeout"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:");"})]})]})}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsx)(e.li,{children:"Blocks until one or more monitored descriptors become ready"}),"\n",(0,n.jsxs)(e.li,{children:["Fills ",(0,n.jsx)(e.code,{children:"events"})," array with ",(0,n.jsx)(e.strong,{children:"only the ready descriptors"})," — no scanning needed"]}),"\n",(0,n.jsxs)(e.li,{children:["Returns the number of ready events; ",(0,n.jsx)(e.code,{children:"0"})," on timeout; ",(0,n.jsx)(e.code,{children:"-1"})," on error"]}),"\n"]}),"\n",(0,n.jsx)(e.h4,{id:s[10].id,children:s[10].value}),"\n",(0,n.jsx)(e.pre,{tabIndex:"0","data-language":"c","data-word-wrap":"",children:(0,n.jsxs)(e.code,{children:[(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"int"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" epfd "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" epoll_create1"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(EPOLL_CLOEXEC);"})]}),"\n",(0,n.jsx)(e.span,{children:" "}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"// Add listen socket"})}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"struct"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" epoll_event ev;"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"ev.events "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" EPOLLIN;"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"ev.data.fd "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" listen_fd;"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"epoll_ctl"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(epfd, EPOLL_CTL_ADD, listen_fd, "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"&"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"ev"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:");"})]}),"\n",(0,n.jsx)(e.span,{children:" "}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"struct"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" epoll_event "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"events"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"[MAX_EVENTS];"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"while"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" ("}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"1"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:") {"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"    int"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" n "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" epoll_wait"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(epfd, events, MAX_EVENTS, "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"-"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"1"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:");"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"    for"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" ("}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"int"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" i "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" 0"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"; i "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"<"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" n; i"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"++"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:") {"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"        if"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" ("}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"events"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"[i].data.fd "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"=="}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" listen_fd) {"})]}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"            // New connection"})}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"            int"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" client_fd "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" accept4"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(listen_fd, "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"NULL"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"NULL"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", SOCK_NONBLOCK);"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"            ev.events "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" EPOLLIN "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"|"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" EPOLLET;"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"            ev.data.fd "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" client_fd;"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"            epoll_ctl"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(epfd, EPOLL_CTL_ADD, client_fd, "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"&"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"ev);"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"        } "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"else"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" {"})]}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"            // Data available on client_fd"})}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"            handle_client"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"events"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"[i].data.fd);"})]}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"        }"})}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"    }"})}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"}"})})]})}),"\n",(0,n.jsx)(e.h4,{id:s[11].id,children:s[11].value}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:["\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:"Level-triggered (LT) — default:"})}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:"epoll_wait"})," keeps returning the event as long as the condition holds (e.g., data still in buffer)"]}),"\n",(0,n.jsx)(e.li,{children:"Easier to use correctly; you can read partial data and pick up next iteration"}),"\n",(0,n.jsx)(e.li,{children:"Works with blocking and non-blocking descriptors"}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(e.li,{children:["\n",(0,n.jsx)(e.p,{children:(0,n.jsxs)(e.strong,{children:["Edge-triggered (ET) — ",(0,n.jsx)(e.code,{children:"EPOLLET"})," flag:"]})}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:["Notified ",(0,n.jsx)(e.strong,{children:"only when the state changes"})," (e.g., new data arrives)"]}),"\n",(0,n.jsxs)(e.li,{children:["You ",(0,n.jsx)(e.strong,{children:"must"})," drain the descriptor completely in one shot (loop until ",(0,n.jsx)(e.code,{children:"EAGAIN"}),")"]}),"\n",(0,n.jsxs)(e.li,{children:["Requires non-blocking descriptors (",(0,n.jsx)(e.code,{children:"O_NONBLOCK"}),")"]}),"\n",(0,n.jsx)(e.li,{children:"More efficient (fewer wakeups) but more complex to implement correctly"}),"\n",(0,n.jsx)(e.li,{children:(0,n.jsx)(e.strong,{children:"Use ET when you understand the draining requirement; LT is safer to start with"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(e.h4,{id:s[12].id,children:s[12].value}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsx)(e.li,{children:"O(1) event delivery — scales to millions of connections"}),"\n",(0,n.jsx)(e.li,{children:"No need to re-register descriptors on each call"}),"\n",(0,n.jsx)(e.li,{children:"Supports edge-triggered mode for maximum efficiency"}),"\n",(0,n.jsx)(e.li,{children:"Used internally by nginx, Redis, Node.js (libuv), and virtually every high-performance Linux server"}),"\n",(0,n.jsx)(e.li,{children:(0,n.jsx)(e.strong,{children:"Default choice for any new Linux server"})}),"\n"]}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsx)(e.h3,{id:s[13].id,children:s[13].value}),"\n",(0,n.jsxs)(e.p,{children:["Introduced in ",(0,n.jsx)(e.strong,{children:"Linux 5.1 (2019)"}),", ",(0,n.jsx)(e.code,{children:"io_uring"})," takes a fundamentally different approach:"]}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:["Uses two ",(0,n.jsx)(e.strong,{children:"shared ring buffers"})," between kernel and user space (submission queue + completion queue)"]}),"\n",(0,n.jsxs)(e.li,{children:["Operations are submitted in bulk — ",(0,n.jsx)(e.strong,{children:"dramatically fewer syscalls"})," than ",(0,n.jsx)(e.code,{children:"epoll"})]}),"\n",(0,n.jsx)(e.li,{children:"Supports network I/O, file I/O, and arbitrary I/O operations uniformly"}),"\n",(0,n.jsxs)(e.li,{children:["Supports true ",(0,n.jsx)(e.strong,{children:"zero-copy"})," and ",(0,n.jsx)(e.strong,{children:"kernel-side polling"})," modes"]}),"\n",(0,n.jsx)(e.li,{children:"Highest possible throughput for I/O-bound applications"}),"\n"]}),"\n",(0,n.jsx)(e.pre,{tabIndex:"0","data-language":"c","data-word-wrap":"",children:(0,n.jsxs)(e.code,{children:[(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"// Simplified sketch — real usage requires liburing or manual ring setup"})}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"struct"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" io_uring ring;"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"io_uring_queue_init"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(QUEUE_DEPTH, "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"&"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"ring"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"0"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:");"})]}),"\n",(0,n.jsx)(e.span,{children:" "}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"struct"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" io_uring_sqe "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"*"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"sqe "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" io_uring_get_sqe"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"&"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"ring"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:");"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"io_uring_prep_recv"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(sqe, client_fd, buf, "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"sizeof"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(buf), "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"0"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:");"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"io_uring_submit"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"&"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"ring"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:");"})]}),"\n",(0,n.jsx)(e.span,{children:" "}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"struct"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" io_uring_cqe "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"*"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"cqe;"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"io_uring_wait_cqe"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"&"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"ring"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"&"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"cqe"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:");"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"  // Block until completion"})]}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"// cqe->res contains bytes read or negative error code"})}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"io_uring_cqe_seen"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"&"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"ring"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", cqe);"})]})]})}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:"Practical notes:"})}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:["Complex API — use ",(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.a,{href:"https://github.com/axboe/liburing",children:"liburing"})})," to simplify usage"]}),"\n",(0,n.jsx)(e.li,{children:"Still actively evolving — new features added with each kernel version"}),"\n",(0,n.jsx)(e.li,{children:"Requires Linux ≥ 5.1 (full feature set needs ≥ 5.10–6.x)"}),"\n",(0,n.jsxs)(e.li,{children:["Not yet the default choice; consider it for ",(0,n.jsx)(e.strong,{children:"specialized high-throughput applications"})," where epoll is a bottleneck"]}),"\n",(0,n.jsxs)(e.li,{children:["Projects like ",(0,n.jsx)(e.strong,{children:"io_uring-based servers"})," (e.g., newer versions of nginx, Tokio in Rust) are beginning to adopt it"]}),"\n"]}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsx)(e.h3,{id:s[14].id,children:s[14].value}),"\n",(0,n.jsxs)(e.table,{children:[(0,n.jsx)(e.thead,{children:(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.th,{}),(0,n.jsx)(e.th,{children:(0,n.jsx)(e.code,{children:"select"})}),(0,n.jsx)(e.th,{children:(0,n.jsx)(e.code,{children:"poll"})}),(0,n.jsx)(e.th,{children:(0,n.jsx)(e.code,{children:"epoll"})}),(0,n.jsx)(e.th,{children:(0,n.jsx)(e.code,{children:"io_uring"})})]})}),(0,n.jsxs)(e.tbody,{children:[(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:(0,n.jsx)(e.strong,{children:"FD limit"})}),(0,n.jsx)(e.td,{children:"1024 (FD_SETSIZE)"}),(0,n.jsx)(e.td,{children:"Unlimited"}),(0,n.jsx)(e.td,{children:"Unlimited"}),(0,n.jsx)(e.td,{children:"Unlimited"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:(0,n.jsx)(e.strong,{children:"Scalability"})}),(0,n.jsx)(e.td,{children:"O(n)"}),(0,n.jsx)(e.td,{children:"O(n)"}),(0,n.jsx)(e.td,{children:"O(1)"}),(0,n.jsx)(e.td,{children:"O(1)"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:(0,n.jsx)(e.strong,{children:"Portability"})}),(0,n.jsx)(e.td,{children:"POSIX"}),(0,n.jsx)(e.td,{children:"POSIX"}),(0,n.jsx)(e.td,{children:"Linux only"}),(0,n.jsx)(e.td,{children:"Linux only"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:(0,n.jsx)(e.strong,{children:"API complexity"})}),(0,n.jsx)(e.td,{children:"Low"}),(0,n.jsx)(e.td,{children:"Low"}),(0,n.jsx)(e.td,{children:"Moderate"}),(0,n.jsx)(e.td,{children:"High"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:(0,n.jsx)(e.strong,{children:"Triggered modes"})}),(0,n.jsx)(e.td,{children:"Level"}),(0,n.jsx)(e.td,{children:"Level"}),(0,n.jsx)(e.td,{children:"Level + Edge"}),(0,n.jsx)(e.td,{children:"Async completion"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:(0,n.jsx)(e.strong,{children:"Kernel set tracking"})}),(0,n.jsx)(e.td,{children:"No"}),(0,n.jsx)(e.td,{children:"No"}),(0,n.jsx)(e.td,{children:"Yes"}),(0,n.jsx)(e.td,{children:"Yes"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:(0,n.jsx)(e.strong,{children:"Recommendation"})}),(0,n.jsx)(e.td,{children:(0,n.jsx)(e.strong,{children:"Avoid"})}),(0,n.jsx)(e.td,{children:"Portable fallback"}),(0,n.jsx)(e.td,{children:(0,n.jsx)(e.strong,{children:"Use this"})}),(0,n.jsx)(e.td,{children:"Specialized/future"})]})]})]}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsx)(e.h3,{id:s[15].id,children:s[15].value}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:["A ",(0,n.jsx)(e.strong,{children:"single event loop"})," calls ",(0,n.jsx)(e.code,{children:"epoll_wait"}),", dispatches to handlers based on ready FDs"]}),"\n",(0,n.jsx)(e.li,{children:"All descriptors set to non-blocking — no call ever blocks"}),"\n",(0,n.jsx)(e.li,{children:"Eliminates thread-per-connection overhead (no context switching, no stack memory per connection)"}),"\n",(0,n.jsx)(e.li,{children:(0,n.jsx)(e.strong,{children:"One thread can serve tens of thousands of connections"})}),"\n",(0,n.jsx)(e.li,{children:"Used by: nginx, Redis, HAProxy, Node.js (via libuv), Memcached"}),"\n"]}),"\n",(0,n.jsx)(e.pre,{"data-word-wrap":"",children:(0,n.jsx)(e.code,{children:"[epoll_wait] → ready FDs → dispatch handlers → [back to epoll_wait]\n         ↑                                              |\n         └──────────────── event loop ─────────────────┘\n"})}),"\n",(0,n.jsx)(e.h3,{id:s[16].id,children:s[16].value}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:"Forgetting to drain on edge-triggered epoll"})," — missed events, stalled connection"]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:"Calling blocking operations inside the event loop"})," — blocks all connections"]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsxs)(e.strong,{children:["Not handling ",(0,n.jsx)(e.code,{children:"EAGAIN"})," / ",(0,n.jsx)(e.code,{children:"EWOULDBLOCK"})]})," — crashing or incorrect logic on non-blocking FDs"]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsxs)(e.strong,{children:["Rebuilding fd_set every iteration with ",(0,n.jsx)(e.code,{children:"select()"})]})," — common bug causing incorrect behavior"]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsxs)(e.strong,{children:["Using ",(0,n.jsx)(e.code,{children:"select()"})," without checking the FD_SETSIZE limit"]})," — silent corruption for FD > 1023"]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:"Leaking epoll descriptors"})," — ",(0,n.jsx)(e.code,{children:"epoll_create1()"})," returns an FD that must be ",(0,n.jsx)(e.code,{children:"close()"}),"d"]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:"Not removing closed FDs from epoll"})," — stale events, confusion (though kernel auto-removes on ",(0,n.jsx)(e.code,{children:"close()"}),")"]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsxs)(e.strong,{children:["Using ",(0,n.jsx)(e.code,{children:"EPOLLET"})," with blocking sockets"]})," — undefined, must always pair with ",(0,n.jsx)(e.code,{children:"O_NONBLOCK"})]}),"\n"]}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsx)(e.h2,{id:s[17].id,children:s[17].value}),"\n",(0,n.jsx)(e.h3,{id:s[18].id,children:s[18].value}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:["Open a regular file or pipe with ",(0,n.jsx)(e.code,{children:"O_NONBLOCK"}),"."]}),"\n",(0,n.jsxs)(e.li,{children:["Observe ",(0,n.jsx)(e.code,{children:"EAGAIN"})," behavior when no data is available."]}),"\n",(0,n.jsx)(e.li,{children:"Compare behavior with blocking mode."}),"\n"]}),"\n",(0,n.jsx)(e.h3,{id:s[19].id,children:s[19].value}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:["Implement a TCP echo server using ",(0,n.jsx)(e.code,{children:"poll()"})," to monitor the listening socket and all connected client sockets simultaneously."]}),"\n",(0,n.jsx)(e.li,{children:"Handle new connections, incoming data, and disconnections in a single loop."}),"\n"]}),"\n",(0,n.jsx)(e.h3,{id:s[20].id,children:s[20].value}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:["Rewrite the ",(0,n.jsx)(e.code,{children:"poll()"}),"-based server using ",(0,n.jsx)(e.code,{children:"epoll()"})," with level-triggered mode."]}),"\n",(0,n.jsx)(e.li,{children:"Add all connected client sockets to the epoll instance."}),"\n",(0,n.jsx)(e.li,{children:"Benchmark both versions with many simultaneous clients."}),"\n"]}),"\n",(0,n.jsx)(e.h3,{id:s[21].id,children:s[21].value}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:["Modify the epoll server to use ",(0,n.jsx)(e.code,{children:"EPOLLET"}),"."]}),"\n",(0,n.jsxs)(e.li,{children:["Implement the draining loop (read until ",(0,n.jsx)(e.code,{children:"EAGAIN"}),")."]}),"\n",(0,n.jsx)(e.li,{children:"Verify correctness: no data should be lost or stuck between iterations."}),"\n"]}),"\n",(0,n.jsx)(e.h3,{id:s[22].id,children:s[22].value}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:["Use the ",(0,n.jsx)(e.code,{children:"timeout"})," parameter of ",(0,n.jsx)(e.code,{children:"poll()"})," or ",(0,n.jsx)(e.code,{children:"epoll_wait()"})," to implement periodic tasks (e.g., connection keep-alive checks) alongside I/O event handling."]}),"\n"]}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsx)(e.h2,{id:s[23].id,children:s[23].value}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:"/system-programming/tasks/networking/multiplexed-sqrt-server/",children:"NET-2: Multiplexed Sqrt Server"})}),"\n"]}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsx)(e.h3,{id:s[24].id,children:s[24].value}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:"/system-programming/samples/select-fds/",children:"Using select"})}),"\n",(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:"/system-programming/samples/poll-fds/",children:"Using poll"})}),"\n",(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:"/system-programming/samples/epoll-fds/",children:"Using epoll"})}),"\n"]}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsx)(e.h2,{id:s[25].id,children:s[25].value}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:"Required"})}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:"https://beej.us/guide/bgnet/html/#select",children:"Beej’s Guide to Network Programming — select()"})," — approachable introduction"]}),"\n",(0,n.jsxs)(e.li,{children:["Kerrisk, ",(0,n.jsx)(e.em,{children:"The Linux Programming Interface"}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsx)(e.li,{children:"Chapter 63: Alternative I/O Models (select, poll, epoll, signal-driven I/O)"}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(e.li,{children:["Stevens, ",(0,n.jsx)(e.em,{children:"Unix Network Programming, Volume 1"})," — Chapter 6: I/O Multiplexing"]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:"https://man7.org/linux/man-pages/man7/epoll.7.html",children:"epoll(7) — Linux man page"})," — authoritative reference"]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:"http://www.kegel.com/c10k.html",children:"The C10K Problem"})," — historical context for why epoll was created"]}),"\n"]}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:"Recommended"})}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:"https://man7.org/linux/man-pages/man2/select.2.html",children:"Linux manual page - select(2)"})}),"\n",(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:"https://man7.org/linux/man-pages/man2/poll.2.html",children:"Linux manual page - poll(2)"})}),"\n",(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:"https://man7.org/linux/man-pages/man2/epoll_create1.2.html",children:"Linux manual page - epoll_create1(2)"})}),"\n",(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:"https://man7.org/linux/man-pages/man2/epoll_ctl.2.html",children:"Linux manual page - epoll_ctl(2)"})}),"\n",(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:"https://man7.org/linux/man-pages/man2/epoll_wait.2.html",children:"Linux manual page - epoll_wait(2)"})}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:"https://man7.org/linux/man-pages/man2/fcntl.2.html",children:"Linux manual page - fcntl(2)"})," — setting ",(0,n.jsx)(e.code,{children:"O_NONBLOCK"})]}),"\n",(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:"https://suchprogramming.com/epoll-in-3-easy-steps/",children:"Illustrative epoll tutorial (suchprogramming.com)"})}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:"https://kernel.dk/io_uring.pdf",children:"io_uring and liburing (Kernel documentation)"})," — Jens Axboe’s overview paper"]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:"https://github.com/axboe/liburing",children:"liburing GitHub repository"})," — helper library for io_uring"]}),"\n",(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:"https://lwn.net/Articles/776703/",children:"Efficient IO with io_uring (lwn.net)"})}),"\n"]}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsx)(e.h2,{id:s[26].id,children:s[26].value}),"\n",(0,n.jsxs)(e.ol,{children:["\n",(0,n.jsx)(e.li,{children:"What is the difference between blocking and non-blocking I/O?"}),"\n",(0,n.jsxs)(e.li,{children:["What does ",(0,n.jsx)(e.code,{children:"EAGAIN"})," mean when returned from a ",(0,n.jsx)(e.code,{children:"read()"})," on a non-blocking descriptor?"]}),"\n",(0,n.jsxs)(e.li,{children:["How do you set a socket to non-blocking mode using ",(0,n.jsx)(e.code,{children:"fcntl()"}),"?"]}),"\n",(0,n.jsx)(e.li,{children:"Why is busy-polling on non-blocking descriptors a bad idea?"}),"\n",(0,n.jsx)(e.li,{children:"What is the fundamental problem that I/O multiplexing solves?"}),"\n",(0,n.jsxs)(e.li,{children:["What is the FD limit of ",(0,n.jsx)(e.code,{children:"select()"})," and why is it a problem?"]}),"\n",(0,n.jsxs)(e.li,{children:["Why must the ",(0,n.jsx)(e.code,{children:"fd_set"})," be rebuilt before every ",(0,n.jsx)(e.code,{children:"select()"})," call?"]}),"\n",(0,n.jsxs)(e.li,{children:["How does ",(0,n.jsx)(e.code,{children:"poll()"})," improve on ",(0,n.jsx)(e.code,{children:"select()"})," in terms of descriptor limits?"]}),"\n",(0,n.jsxs)(e.li,{children:["What does ",(0,n.jsx)(e.code,{children:"POLLIN"})," indicate, and how do you check it after ",(0,n.jsx)(e.code,{children:"poll()"})," returns?"]}),"\n",(0,n.jsxs)(e.li,{children:["Why does ",(0,n.jsx)(e.code,{children:"epoll"})," scale better than ",(0,n.jsx)(e.code,{children:"select"})," or ",(0,n.jsx)(e.code,{children:"poll"})," as the number of connections grows?"]}),"\n",(0,n.jsxs)(e.li,{children:["What is the difference between ",(0,n.jsx)(e.code,{children:"epoll_ctl()"})," and ",(0,n.jsx)(e.code,{children:"epoll_wait()"}),"?"]}),"\n",(0,n.jsx)(e.li,{children:"Explain the difference between level-triggered and edge-triggered epoll."}),"\n",(0,n.jsx)(e.li,{children:"Why must edge-triggered epoll be used with non-blocking file descriptors?"}),"\n",(0,n.jsx)(e.li,{children:"What is the “draining” requirement in edge-triggered mode?"}),"\n",(0,n.jsxs)(e.li,{children:["What does the ",(0,n.jsx)(e.code,{children:"data"})," field of ",(0,n.jsx)(e.code,{children:"struct epoll_event"})," allow you to store, and why is it useful?"]}),"\n",(0,n.jsxs)(e.li,{children:["What is ",(0,n.jsx)(e.code,{children:"io_uring"})," and how does it differ from ",(0,n.jsx)(e.code,{children:"epoll"}),"?"]}),"\n",(0,n.jsx)(e.li,{children:"Which interface would you choose for a new high-performance Linux server, and why?"}),"\n",(0,n.jsxs)(e.li,{children:["What is the Reactor pattern, and how does it relate to ",(0,n.jsx)(e.code,{children:"epoll"}),"?"]}),"\n"]}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsx)(e.h2,{id:s[27].id,children:s[27].value}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:"strace"})," — observe ",(0,n.jsx)(e.code,{children:"epoll_create"}),", ",(0,n.jsx)(e.code,{children:"epoll_ctl"}),", ",(0,n.jsx)(e.code,{children:"epoll_wait"}),", ",(0,n.jsx)(e.code,{children:"poll"}),", ",(0,n.jsx)(e.code,{children:"select"})," syscalls"]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:"ss -s"})," — summary of socket statistics"]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:"netstat -an"})," — inspect connection states"]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:"wrk"})," / ",(0,n.jsx)(e.code,{children:"ab"})," (Apache Bench) — HTTP load testing to stress-test servers"]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:"iperf3"})," — raw TCP throughput testing"]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:"perf"})," — profile event loop performance"]}),"\n"]})]})},"/system-programming/topics/io-multiplexing",{filePath:"pages/system-programming/topics/io-multiplexing.mdx",timestamp:1771616157e3,pageMap:h.v,frontMatter:{description:"I/O multiplexing in Linux — monitoring multiple file descriptors with select, poll, epoll, and an introduction to io_uring for building high-performance event-driven servers."},title:"I/O Multiplexing"},"undefined"==typeof RemoteContent?d:RemoteContent.useTOC)}},function(i){i.O(0,[3560,2888,9774,179],function(){return i(i.s=7397)}),_N_E=i.O()}]);